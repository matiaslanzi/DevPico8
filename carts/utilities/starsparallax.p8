pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
--------------------------------
--  short program for paralaxing
-- stars, including warp effect!
--
--  by vyvyn with suggestions
-- for efficiency by mboffin!
--
--  feel free to use the three
-- star routines in your own
-- programs!
--------------------------------

--  main program cycles at
-- bottom!

--------------------------------
-- initializes stars!
--------------------------------
function _init_stars()

 -- this will hold all stars!
 stars={}

 -- what "speed" we're at.
 warp=1

 --  the borders the stars
 -- can't exist outside of on
 -- the screen.
 starminx=0
 starminy=0
 starmaxx=127
 starmaxy=127

 --  palettes i use. metal is
 -- for "grays" and cool is for
 -- "blues".. good for warping
 -- stars!

 metal={13,6,7}
 cool={1,12,7}

 --  total stars allowed on the
 -- screen at one time. try
 -- more! or less!

 local totstars=60

 --  here, we count from 1 to
 -- whatever totstars is set
 -- to.. that's all our stars
 -- being put into that stars{}
 -- table!

 for i=1,totstars do

  --  pick random speed. this
  -- also determines star's
  -- color later!
  local rndspd=flr(rnd(3)+1)

  --  add it all to the table
  -- of stars including a
  -- random "x" and "y"..

  add(stars,{
   x=rnd(128),
   y=rnd(128),
   spd=rndspd
  })

 end
end
--------------------------------
-- function to detect input!
--------------------------------
function _update_controls()

 --  just a placeholder to show
 -- the warp effect. one action
 -- button sets warp to "1" the
 -- other, to "2"!

 if btnp(5) then
  warp=1
  sfx(0)
  sfx(2)
 end

 if btnp(4) then
  warp=2
  sfx(0)
  sfx(1)
 end
end
--------------------------------
-- function to update stars!
--------------------------------
function _update_stars()

 --  if we're in "normal" speed
 -- we do "normal" gray stars.
 if(warp==1)then
  --  go through all entries in
  -- "stars"..
  for st in all(stars) do
   --  move the star by its
   -- speed..
   st.y+=st.spd
   --  ..if it's more than our
   -- border, we reset it.
   if (st.y>=starmaxy) then
    st.y=starminy
    st.x=(flr(rnd(128)))
    st.spd=flr(rnd(3)+1)
   end
  end
 end

 --  if we're at "warp speed"
 -- we do the same, just faster
 -- by adding "3" to the usual
 -- star's speed..
 if(warp==2)then
  for st in all(stars) do
   st.y+=st.spd+3
   if (st.y>=starmaxy) then
    st.y=starminy
    st.x=(flr(rnd(128)))
    st.spd=flr(rnd(3)+1)
   end
  end
 end
end
--------------------------------
-- function to draw stars!
--------------------------------
function _draw_stars()
 --  go though all the star
 -- entries..
  for st in all(stars) do
  --  if at normal speed, draw
  -- a normal star..
  if(warp==1)then
   pset(st.x, st.y, metal[st.spd])
  end
  --  if we're at warp speed,
  -- it's a bit more complex..
  if(warp==2)then
   --  if this current star's
   -- speed is 3..
   if(st.spd==3)then
    --  draw the star, including
    -- a long "tail"..
    line(st.x, st.y-6, st.x, st.y-10, cool[1])
    line(st.x, st.y-1, st.x, st.y-5, cool[2])
    pset(st.x, st.y, cool[3])
   end
   --  if this current star's
   -- speed is 2..
   if(st.spd==2)then
    --  draw the star, including
    -- a shorter "tail"..
    line(st.x, st.y-1, st.x, st.y-2, cool[1])
    pset(st.x, st.y, cool[2])
   end
   --  if this current star's
   -- speed is 1..
   if(st.spd==1)then
   -- ..just draw a lonely dark
   -- blue star!
    pset(st.x, st.y, cool[1])
   end
  end
 end
end
--------------------------------
-- main program initialization!
--------------------------------
function _init()
 _init_stars()
end
--------------------------------
-- main program draw cycle!
--------------------------------
function _draw()
 cls()

 _draw_stars()

 --  this is just to let people
 -- know they can change the
 -- warp with the action
 -- buttons..

 print("   hit ‚ùé or üÖæÔ∏è to set warp!",1,1,1)
 print("   hit ‚ùé or üÖæÔ∏è to set warp!",0,0,7)
end
--------------------------------
-- main program update cycle!
--------------------------------
function _update()
 _update_controls()
 _update_stars()
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000070707770777000000777770000000770777000000777770000007770077060000770777077700000707077707770777007000000060000000060
00000000000071710711071100007717177000007071717100007711177000000711707100007011711107110000717171717171717107100000000d00000000
00000000000077710710071000007770777100007171770100007717077100000710717100007770770007100000717177717701777107100000000000000000
00000000000071710710071000007717077100007171717000007710177100000710717100000171711007100000777171717170711100100000000000000000
0000000000007171777007100000077777110000770171710000077777110000071077010000770177700710000077717171717171000700d000000000000000
000000000000010101110010000000111110000001100101000000111110000000100110000001100111001000000111010101010100001000000000d0000000
0000000000000000000000000000000000000000000000000000000000000000000000070d000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000
00000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000d000000000000700000000000000000d0000000000000000000000000000000000d00000000000
0000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0060000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000d00000000000000000000
00000000000000000000000000000000000000000000000d000000d0000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000006000000000000000000000000000000000000000000000000000000000000700000000000000000000d00000000000000d000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000060
0000000000000000000000000000000000d000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000
00000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000d00000000d0000000000000000000d000000000000000000000000000000000000d00000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000600000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d00000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000d00d0000000000000000000000000000000000000000000d700000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000d0000000000000d00000000000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000d000000000000000000000d0000000000000000000000000000000000000
00000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000d00000000
000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000
0000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000
000000060000000000000d0000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000600000006000
00000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000600000000
00007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000600d00000000000000000000000
0000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000d0000000000000000000000000000000d00000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000
00000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000
00000000000000000000000000000000000000000000000000000000700000000000000000000000000000000000000000000000000007000000000000000000
00000000000000000000000000000000000000000000000000000000000000000600000000000060000000000000600000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000
00000000000000000000070000000000000000000000000000000000000000000000000000000000060000000000000060000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000
0000000000000000000000000000000006000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000007070000000000000000000000000000000000000000000000000000000000000000000d00000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000700000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000d0000000000000000000000000000
00000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d0000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000007000000000000000000000000000070000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000d00000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000d000000000000000000700000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000006000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000007000000000000700000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000060000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000d00000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600d00000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000

__sfx__
00020000160201d020150203602003000010000600004000020000100001000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000200000144301433014230143301453024530445306443084430a4330c4330f453124531445317433194331a423174231443312433104231242315423194231d42320433224332443324423194530e45307453
000200003a64034630306302d6302b640286402565023640226301f6301d6301a6301963018630166401463012630116300f6300e6300c6300a63009620086200762006620046200361001610016000160001600
__music__
00 01424344
