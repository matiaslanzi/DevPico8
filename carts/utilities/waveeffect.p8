pico-8 cartridge // http://www.pico-8.com
version 36
__lua__
-- mother-esque bg wave routines
-- by eiyeron
local t = 0
local ampl = 8
local freq = 2
local scale = 1/60

-- the core of the effect : the sine function
local function wave(y,ampl,freq,scale)
		return ampl*sin((y/128*freq)+(scale*t))
end

--[[pix/pix spr-based. quite slow]]--
local function wave_horizontal(sprx,spry,sprw,sprh)
	for y=0,127 do
		local offset_x = wave(y,ampl,freq,scale)
		for x=0,127,1 do
			sspr((x+offset_x)%sprw+sprx,y%sprh+spry,1,1,x,y)
		end
	end
end
local function wave_vertical(sprx,spry,sprw,sprh)
	for y=0,127 do
		local offset_y = wave(y,ampl,freq,scale)
		local sy = (y+offset_y)%sprh
		for x=0,127,sprw do
			sspr(sprx,spry+sy,sprw,1,x,y)
		end
	end
end

--[[map()-based. uses a 16*16 map section (tweakable)]]--
local function map_wave_horizontal(mapx,mapy,mapw,maph)
	for y=0,127 do
		local offset_x = wave(y,ampl,freq,scale)
		local sx = offset_x%(mapw*8)
		camera(sx,0)
		clip(0,y,127,1)
		map(mapx,mapy+y/8,0,flr(y/8)*8,mapw,1)
		map(mapx,mapy+y/8,mapw*8,flr(y/8)*8,mapw,1)
	end
	camera() clip()
end
local function map_wave_vertical(mapx,mapy,mapw,maph)
	for y=0,127 do
		local offset_y = wave(y,ampl,freq,scale)
		local sy = (y+offset_y)%(maph*8)
		camera(0,0)
		clip(0,y,127,1)
		-- tbh i don't know how i made it work.
		map(mapx,mapy+flr(sy/8),0,y-flr(sy%8),mapw,1)
	end
	camera() clip()
end

function _draw()
	cls()
	local way = "spr" -- "map"

	if way == "map" then	
		if flr(t/100)%2 == 0 then
			wave_horizontal(8,0,16,16)
		else
			wave_vertical(8,0,16,16)
		end
	else
		if flr(t/100)%2 == 0 then
			map_wave_horizontal(0,0,16,16)
		else
			map_wave_vertical(0,0,16,16)
		end
	end
	-- cpu/mem usage overlay
	gpu = stat(1) - cpu
	local cpt = -1+cpu*129
	line(-1,126,cpt,126,10)
	line(cpt,126,cpt+gpu*129,126,11)
	line(0,127,stat(0)/16,127,12)
end

function _update()
	t+=1
	-- cpu/mem usage overlay
	cpu = stat(1)
end

-- cpu/mem usage overlay
local cpu = 0
local gpu = 0

__gfx__
0000000022226666555522222222ccccbbbb22220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000026666666555555522cccccccbbbbbbb20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070026666666555555522cccccccbbbbbbb20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700026666666555555522cccccccbbbbbbb20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770006666666655555555ccccccccbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007006666666655555555ccccccccbbbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006666666885555555ccccccc88bbbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000006666668658555555cccccc8658bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005555558568666666aaaaaa85688888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005555555886666666aaaaaaa8888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005555555566666666aaaaaaaa888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000005555555566666666aaaaaaaa888888880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000085555555666666688aaaaaaa8888888e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000085555555666666688aaaaaaa8888888e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000085555555666666688aaaaaaa8888888e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000088888555666688888888aaaa8888eeee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8888aaaa66668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668888888885558888eee0
8888aaaa66668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668888888885558888eee0
8888aaaa66668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668888888885558888eee0
2222cccc5555222222226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666bbbb2220
2222cccc5555222222226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666bbbb2220
2ccccccc5555555226666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666bbbbbbb0
2ccccccc5555555226666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666bbbbbbb0
2ccccccc5555555226666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666bbbbbbb0
2ccccccc5555555226666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666bbbbbbb0
cccccccc5555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666bbbbbbb0
cccccccc5555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666bbbbbbb0
ccccccc885555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688bbbbbb0
cccccc86585555556666668658555555666666865855555566666686585555556666668658555555666666865855555566666686585555556666668658bbbbb0
55555585686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568666660
55555558866666665555555886666666555555588666666655555558866666665555555886666666555555588666666655555558866666665555555886666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
22226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666555522222222666655552220
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666686585555556666668658555555666666865855555566666686585555556666668658555555666666865855555566666686585555556666668658555550
55555585686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
88888555666688888888855566668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668880
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555550
55555585686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
22226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666555522222222666655552220
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555550
66666686585555556666668658555555666666865855555566666686585555556666668658555555666666865855555566666686585555556666668658555550
55555585686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568666660
55555558866666665555555886666666555555588666666655555558866666665555555886666666555555588666666655555558866666665555555886666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
88888555666688888888855566668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668880
88888555666688888888855566668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668880
88888555666688888888855566668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668880
22226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666555522222222666655552220
22226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666555522222222666655552220
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555550
66666686585555556666668658555555666666865855555566666686585555556666668658555555666666865855555566666686585555556666668658555550
55555585686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568666660
55555558866666665555555886666666555555588666666655555558866666665555555886666666555555588666666655555558866666665555555886666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
22226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666555522222222666655552220
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666686585555556666668658555555666666865855555566666686585555556666668658555555666666865855555566666686585555556666668658555550
55555585686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
88888555666688888888855566668888888885556666888888888555666688888888855566668888888885556666888888888555666688888888855566668880
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555550
55555585686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
55555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
85555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666660
22226666555522222222666655552222222266665555222222226666555522222222666655552222222266665555222222226666555522222222666655552220
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
26666666555555522666666655555552266666665555555226666666555555522666666655555552266666665555555226666666555555522666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555550
66666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555550
66666686585555556666668658555555666666865855555566666686585555556666668658555555666666865855555566666686585555556666668658555550
aaaaaa85686666665555558568666666555555856866666655555585686666665555558568666666555555856866666655555585686666665555558568888880
aaaaaaa8866666665555555886666666555555588666666655555558866666665555555886666666555555588666666655555558866666665555555888888880
aaaaaaaa666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555588888880
aaaaaaaa666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555588888880
aaaaaaaa666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555588888880
aaaaaaaa666666665555555566666666555555556666666655555555666666665555555566666666555555556666666655555555666666665555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
8aaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb55555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880
ccaaaaaa666666688555555566666668855555556666666885555555666666688555555566666668855555556666666885555555666666688555555588888880

__map__
0302010201020102010201020102010400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112111211121112111211121112111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112111211121112111211121112111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112111211121112111211121112111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112111211121112111211121112111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112111211121112111211121112111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112111211121112111211121112111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1112111211121112111211121112111200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102010201020102010201020102010200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1312111211121112111211121112111400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
